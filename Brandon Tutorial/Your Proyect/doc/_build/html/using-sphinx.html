
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Notes on Using Sphinx &#8212; trianglelib 1.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="RST Quick Reference" href="quick-rst.html" />
    <link rel="prev" title="Welcome to the Sphinx Tutorial!" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="notes-on-using-sphinx">
<h1>Notes on Using Sphinx<a class="headerlink" href="#notes-on-using-sphinx" title="Permalink to this headline">¶</a></h1>
<p>Here are some quick notes on running Sphinx successfully.
Each topic will be elaborated upon at the right point
during our class.</p>
<div class="section" id="starting-a-sphinx-project">
<h2>Starting a Sphinx project<a class="headerlink" href="#starting-a-sphinx-project" title="Permalink to this headline">¶</a></h2>
<p>The wonder of a properly designed framework
is that it begins by positioning you at a working starting point
instead of leaving you to wander endlessly through a <code class="docutils literal notranslate"><span class="pre">README</span></code>
that, after dozens of steps, leaves you guessing which step
you did improperly to have wound up with a broken install.</p>
<p>Sphinx gets you started with <code class="docutils literal notranslate"><span class="pre">sphinx-quickstart</span></code>.
Here is how a quick-start session will look,
paying attention only to its prompts and how you should respond
(which is mostly by pressing Return over and over),
when you use it to create a new project:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ sphinx-quickstart
Welcome to the Sphinx quickstart utility...

&gt; Root path for the documentation [.]: doc
&gt; Separate source and build directories (y/N) [n]:
&gt; Name prefix for templates and static dir [_]:
&gt; Project name: trianglelib
&gt; Author name(s): Brandon
&gt; Project version: 1.0
&gt; Project release [1.0]:
&gt; Project language [en]:
&gt; Source file suffix [.rst]: .rst
&gt; Name of your master document (without suffix) [index]: index
&gt; Do you want to use the epub builder (y/N) [n]: n
&gt; autodoc: automatically insert docstrings ... (y/N) [n]: y
&gt; doctest: automatically test code snippets ... (y/N) [n]: y
&gt; intersphinx: ... (y/N) [n]:
&gt; todo: ... (y/N) [n]:
&gt; coverage: ... (y/N) [n]:
&gt; imgmath: ... (y/N) [n]:
&gt; mathjax: ... (y/N) [n]: y
&gt; ifconfig: ... (y/N) [n]:
&gt; viewcode: include links to the source code ... (y/N) [n]: y
&gt; githubpages: ... (y/n) [n]:
&gt; Create Makefile? (Y/n) [y]: y
&gt; Create Windows command file? (Y/n) [y]: y
</pre></div>
</div>
</div>
<div class="section" id="sphinx-layout">
<h2>Sphinx layout<a class="headerlink" href="#sphinx-layout" title="Permalink to this headline">¶</a></h2>
<p>After you have succeeded in quick-starting,
your project should look something like this,
if we imagine that you created your <code class="docutils literal notranslate"><span class="pre">doc</span></code> Sphinx directory
right next to your <code class="docutils literal notranslate"><span class="pre">trianglelib</span></code> Python package directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>your-project/
|-- doc/
|   |-- Makefile
|   |-- _build/
|   |-- _static/
|   |-- _templates/
|   |-- conf.py
|   |-- index.rst
|   `-- make.bat
|-- setup.py
`-- trianglelib/
    |-- __init__.py
    |-- shape.py
    `-- utils.py
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">index.rst</span></code> is your initial documentation file,
whose table of contents you will expand
as you add additional <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files to this directory.</p>
</div>
<div class="section" id="hints">
<h2>Hints<a class="headerlink" href="#hints" title="Permalink to this headline">¶</a></h2>
<p>Here are a few adjustments you can make to a Sphinx project
once you have its files laid out and set up.</p>
<ul>
<li><p>Sphinx is sensitive to indentation —
blocks and code snippets end when the indentation level
returns to its previous level —
but Sphinx is usually forgiving about how far exactly you indent;
you can generally choose freely how far to indent,
so long as you are then consistent about sticking to that level.
Sphinx is much like Python in this regard,
but without a strong community preference for a particular
number of spaces per indentation level.</p></li>
<li><p>Build your documentation by changing directory
to the directory that contains the <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> and then running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
</li>
<li><p>You can view the documentation by running Python’s built-in
web server, opening <code class="docutils literal notranslate"><span class="pre">http://localhost:8000/</span></code> in your web browser,
and navigating into the <code class="docutils literal notranslate"><span class="pre">_build/html</span></code> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">SimpleHTTPServer</span>
</pre></div>
</div>
</li>
<li><p>Feel free to create directories beneath <code class="docutils literal notranslate"><span class="pre">doc</span></code>
for groups of <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files that do not belong at the top level.
Simply refer to such files in your <code class="docutils literal notranslate"><span class="pre">index.rst</span></code> table of contents
using a <code class="docutils literal notranslate"><span class="pre">dir/filename</span></code> syntax so that Sphinx can find them.</p></li>
<li><p>You can get rid of the line that says “Contents:” in <code class="docutils literal notranslate"><span class="pre">index.rst</span></code>
since it causes a bizarre blank page in the PDF output.</p></li>
<li><p>To make prettier PDFs, remove the whole section in <code class="docutils literal notranslate"><span class="pre">index.rst</span></code>
named “Indices and tables.”</p></li>
<li><p>Do not despair if you realize later that you need an extension
that you failed to answer <code class="docutils literal notranslate"><span class="pre">y</span></code> to during the quick-start;
simply go into the <code class="docutils literal notranslate"><span class="pre">conf.py</span></code> and add the extension to the
<code class="docutils literal notranslate"><span class="pre">extensions</span></code> list and make any other changes the extension needs.
You can always simply re-run the quick start to make a new project
with the extension active, then run <code class="docutils literal notranslate"><span class="pre">diff</span></code> between your own
<code class="docutils literal notranslate"><span class="pre">Makefile</span></code> and the new one to see what the differences are.</p></li>
<li><p>You can use Semantic Newlines to be friendly to your version control.</p></li>
<li><p>Here is a small diagram of how I think of documentation,
which we will use as a rough guide during class:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                 <span class="n">developer</span>             <span class="n">developer</span>
<span class="n">new</span> <span class="n">user</span>       <span class="n">writing</span> <span class="n">new</span> <span class="n">code</span>       <span class="n">reading</span> <span class="n">code</span>
   <span class="o">|</span>                 <span class="o">|</span>                     <span class="o">|</span>
   <span class="n">v</span>                 <span class="n">v</span>                     <span class="n">v</span>
<span class="n">tutorial</span>  <span class="o">&lt;--&gt;</span>  <span class="n">topical</span> <span class="n">guides</span>  <span class="o">&lt;--&gt;</span>  <span class="n">API</span> <span class="n">reference</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="helping-autodoc-find-your-package">
<h2>Helping autodoc find your package<a class="headerlink" href="#helping-autodoc-find-your-package" title="Permalink to this headline">¶</a></h2>
<p>In order to run <code class="docutils literal notranslate"><span class="pre">autodoc</span></code> directives on your package,
the Python interpreter that is running Sphinx for you
needs to be able to import your package.
You can test whether Python can see your package
by testing whether this command returns without error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="o">-</span><span class="n">c</span> <span class="s1">&#39;import your_package&#39;</span>
</pre></div>
</div>
<p>There are three general approaches
to making your package available to <code class="docutils literal notranslate"><span class="pre">autodoc</span></code>.</p>
<ol class="arabic">
<li><p>Have your package’s top-level directory
sit right next to your Sphinx <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> and <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>
and all of your top-level RST text files.
When you type <code class="docutils literal notranslate"><span class="pre">make</span></code> inside this directory
and it goes off and runs Sphinx,
your package will be visible
because it is sitting in the current working directory.</p>
<p><em>The downside:</em> you usually want your package
sitting out by itself in your source distribution,
not mixed in or sitting beneath its own documentation.</p>
</li>
<li><p>Set the Python path environment variable
to point to the directory containing your package.
You can do this with an <code class="docutils literal notranslate"><span class="pre">export</span></code> statement
that you run before you start building your documentation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">PYTHONPATH</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">brandon</span><span class="o">/</span><span class="n">trianglelib</span>
</pre></div>
</div>
<p>Or you can set the Python path only for the build command itself,
leaving your shell variable settings pristine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PYTHONPATH</span><span class="o">=/</span><span class="n">home</span><span class="o">/</span><span class="n">brandon</span><span class="o">/</span><span class="n">triangle</span><span class="o">-</span><span class="n">project</span> <span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p><em>The downside:</em> You either have to remember to manually
set this environment variable each time you run Sphinx,
or you have to create and maintain a small shell script
as a separate file that will remember to set the path and run Sphinx.</p>
</li>
<li><p>If you have installed Sphinx inside a virtual environment —
which is a really, really great idea —
then you can install your under-development package there too
by using the pip <code class="docutils literal notranslate"><span class="pre">--editable</span></code> flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">brandon</span><span class="o">/</span><span class="n">triangle</span><span class="o">-</span><span class="n">project</span>
</pre></div>
</div>
<p>Once you have run this command, the Python running
inside of this virtual environment is permanently able
to <code class="docutils literal notranslate"><span class="pre">import</span></code> <code class="docutils literal notranslate"><span class="pre">trianglelib</span></code> without further ado.
(Assuming that you do not remove the project from your filesystem!)</p>
<p><em>The downside:</em> When you check the project out
on to a fresh machine, you either have to always remember
to manually set up the virtual environment the right way,
or you have to keep a shell script in the repository
that sets it up for you each time.
(Even though that is a good idea anyway.)</p>
</li>
<li><p>Assuming that your package and its documentation
are part of the same source repository — as they should be —
they will always have the same relative position on the filesystem.
In this case, you can simply edit the Sphinx <code class="docutils literal notranslate"><span class="pre">conf.py</span></code>
so that its <code class="docutils literal notranslate"><span class="pre">sys.path</span></code> configuration entry
points at the relative position of your package:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s1">&#39;../triangle-project&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p><em>All upside:</em> this is, in my opinion, the best approach,
as it always goes along for the ride with your repository,
and works immediately upon repository check-out
without having to rely on any intermediate setup steps.</p>
</li>
</ol>
</div>
<div class="section" id="deployment">
<h2>Deployment<a class="headerlink" href="#deployment" title="Permalink to this headline">¶</a></h2>
<p>We will discuss this topic in depth,
but here are some links for your further reference
when the class is complete:</p>
<ul>
<li><p>It should be possible to export the contents of <code class="docutils literal notranslate"><span class="pre">_build/html</span></code>
to any file-system-based web service and serve it as static content.</p></li>
<li><p>You can package the documentation in a ZIP file
and upload it using the “edit” page for your Python package,
and it will appear at the URL:</p>
<p><code class="docutils literal notranslate"><span class="pre">http://pythonhosted.org/&lt;project-name&gt;</span></code></p>
<p>Detailed instructions for this procedure live at:</p>
<p><a class="reference external" href="http://pythonhosted.org/">http://pythonhosted.org/</a></p>
</li>
<li><p>The powerful and popular Read the Docs service
lets you configure your GitHub repository
so that every time you push a new version of your software,
the documentation gets automatically rebuilt
and made available at:</p>
<p><code class="docutils literal notranslate"><span class="pre">https://readthedocs.org/projects/&lt;project-name&gt;/</span></code></p>
<p>Read the Docs also supports custom host names
if you want your documentation to appear beneath your own
project sub-domain.
More information is available at:</p>
<p><a class="reference external" href="https://readthedocs.org/">https://readthedocs.org/</a></p>
</li>
<li><p>Creating a PDF is nearly as simple as running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">html</span>
</pre></div>
</div>
<p>Except that you have to have the Latex typesetting system installed,
which is a daunting task on many platforms and operating systems.
On my own Ubuntu Linux laptops,
I need to install several packages before even attempting it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">texlive</span><span class="o">-</span><span class="n">fonts</span><span class="o">-</span><span class="n">recommended</span>
<span class="n">texlive</span><span class="o">-</span><span class="n">latex</span><span class="o">-</span><span class="n">recommended</span>
<span class="n">texlive</span><span class="o">-</span><span class="n">latex</span><span class="o">-</span><span class="n">extra</span>
</pre></div>
</div>
</li>
<li><p>See the Sphinx documentation for several other supported formats!</p></li>
<li><p>We will tackle simple theming tasks during the tutorial’s
second half; remember that the PyEphem project is a good living
example of how to completely replace the Sphinx HTML themes
with one of your own, so that you are essentially using Sphinx
to build your own web site.</p></li>
</ul>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">trianglelib</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Notes on Using Sphinx</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#starting-a-sphinx-project">Starting a Sphinx project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sphinx-layout">Sphinx layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hints">Hints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#helping-autodoc-find-your-package">Helping autodoc find your package</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deployment">Deployment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="quick-rst.html">RST Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick-sphinx.html">Sphinx Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-api.html">Writing ‘api.rst’</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-tutorial.html">Writing ‘tutorial.rst’</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-guide.html">Writing ‘guide.rst’</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial.html">Example: tutorial.rst — The trianglelib tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide.html">Example: guide.rst — The trianglelib guide</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Welcome to the Sphinx Tutorial!</a></li>
      <li>Next: <a href="quick-rst.html" title="next chapter">RST Quick Reference</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Dario Arzaba.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/using-sphinx.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>